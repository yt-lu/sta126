---
title: "Getting Started with R"
author: "Yuanting Lu"
date: "`r format(Sys.Date(), format = '%m/%d/%Y')`"
output: 
  html_document:
    theme: united
    highlight: monochrome
    css: notes-style.css
    toc: TRUE
    number_sections: FALSE
    toc_float:
      collapsed: FALSE
      smooth_scroll: TRUE
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval = TRUE)
```

<hr class="left"> </hr>

### Installation

Please watch the tutorial videos below on how to install *R* and *RStudio*.

- [Installations on Mac OS](https://www.youtube.com/watch?v=Y20P3u3c_1c&list=PLBPoOsxO35OoTX-uTCjDMA79qCkZGwM4j&index=2){target="_blank"}.
- [Installations on Windows](https://www.youtube.com/watch?v=VLWaED9jTiA&list=PLBPoOsxO35OoTX-uTCjDMA79qCkZGwM4j){target="_blank"}. 

So, *R* is a free software for statistical computing and graphics. But, what is *RStudio* and why is it recommended? Your answers in the end of this semester will probably include some of the reasons given in this article, [*Top 6 Reasons You Need to be Using RStudio*](https://www.r-bloggers.com/top-6-reasons-you-need-to-be-using-rstudio/#:~:text=Rstudio%20(with%20knitr)%20allows%20you,in%20a%20simple%20markdown%20format.){target="_blank"}.

### *R* Interface

![](images/Rconsole.png){width="45%"}![](images/Rconsole-win.png){width="46%"}


### RStudio Interface

![](images/RStudio.png)

The largest subpanel on the left is the <key>*R* console</key>. Yes, *R* console is embeded in RStudio. 

The buttons on the top right corner of each subpanel allow us to minimize, maximize, or resize the particular subpanel. We will learn about the other subpanels as we move along.

### *R* 101

We can either use the *R* console in the *R* interface or in the RStudio interface. For now, the choice does not make any difference. But, when task gets more complicated, the advantage of using RStudio will be clear.

1. Basic calculations. Try the following commands in an *R* console.

<div class="ilist">

```{r eval=FALSE}
3 * 7 
15 / 5
9 ^ 2
sqrt(36)
```
**Practice:** Calculate $0.43 + 1.96 \times \sqrt{\frac{0.43(1 - 0.43)}{108}}$.
</div>

2. Input data manually. For example, the closing stock prices for Eastman Kodak Company (KODK) in New York Stock Exchange are \$2.62, \$7.94, \$33.20, \$29.83, and \$21.85 for the week July 27--31, 2020.

<div class="ilist">

```{r eval=FALSE}
Close <- c(2.62, 7.94, 33.20, 29.83, 21.85)
```

We deposited the data in the variable `Close`. This was done in two steps. 

- The <opt>c</opt> function combined its arguments (i.e., the prices) and creates a list.
- The arrow sign (`<-`) deposited the content on the right-hand side of the arrow (i.e., the closing prices) to the *R* variable on the left-hand side of the arrow (i.e., the variable `Close`). 

Now if we type `Close` in the console, then its content is printed.

```{r eval=FALSE}
Close
```


</div>


3. Read data from a file. 

<div class="ilist">
Of course, it will not be practical to input larger data set manually. Instead, we read the data set from a file. For example, we can download a one-year trading prices of KODK, from [Yahoo Finance](https://finance.yahoo.com/quote/KODK/history?p=KODK){target="_blank"}. The default name of the file is `KODK.csv`. It is typically saved in the Downloads folder on our computer. So, after the download, we can type[^filechoose]

- (Mac OS) <cc>kodk <- read.csv("/Users/<span style="color:red">YourUserName</span>/Downloads/KODK.csv")</cc>
- (Windows) <cc>kodk <- read.csv("C:/Users/<span style="color:red">YourUserName</span>/Downloads/KODK.csv")</cc>

For the convenience of class activity, a copy of the KODK stock price data (Jan 02 -- August 18, 2020) is saved the online in the course webpage. We can read the data set by using the file URL.
```{r}
kodk <- read.csv("https://albums.yuanting.lu/sta126/KODK.csv")
```
The line reads the data set from the file `KODK.csv` and saves it in the *R* variable `kodk`, so that from now on, whenever we type `kodk`, *R* knows to pull out this saved data set. Let's try it.
```{r eval=FALSE}
kodk
```

What is in this data set? All the historical prices of KODK in 2020. In particular, there is a column named `Close` that has all the closing prices for this stock. Typing the data set name followed by a \$ sign and the column name allows us to extract a specific column from the data set. 

```{r eval=FALSE}
kodk$Close
```

</div>

### *R* Plot 101

Graphs are very effective in delivering information. For example, a plot of the daily KODK stock closing price will clearly reveal the trend in price change. 
```{r}
plot(1:254, kodk$Close, 
     type = "l",
     main = "Eastman Kodak Company (KODK) Daily NYSE Closing Price",
     xlab = "Date", ylab = "Price ($)")
```

In the <opt>plot</opt> function[^option], 

- <opt>1:254</opt> creates a sequence 1, 2, 3, ..., 254, because there are 254 trading days by August 18 of 2020. These serve as the x-coordinates.[^asDate]
- <opt>kodk$Close</opt> contains the closing prices of the 254 days. There are the y-coordinates.
- The option <opt>type = "l"</opt>: the letter <opt>l</opt> stands for line, meaning all the points are connected by line segments. Change it to <opt>type = "p"</opt> to plot the points only.
- The option <opt>main</opt> adds a title to the graph.
- The options <opt>xlab</opt> and <opt>ylab</opt> add text labels on the x and y-axis, respectively.

### {- #endnotes}

<hr class="left"> </hr>

[^option]: In the <opt>plot</opt> function, <opt>type</opt>, <opt>main</opt>, <opt>xlab</opt>, and <opt>ylab</opt> are all underlined in the code chunk. They are called options. The <opt>plot</opt> function works fine without these options. But, we typically add a few options to customize the output of a function.

[^asDate]: Of course, it makes more sense if we display the calendar dates along the x-axis instead of sequential days. To complish this, replace <opt>1:254</opt> by <opt>as.Date(kodk$Date)</opt>. The data in <opt>kodk\$Date</opt> is in the format YYYY-MM-DD. We know they are dates, but *R* does not. So, the <opt>as.Date</opt> function tells *R* to treat them as dates. 

[^filechoose]: Alternatively, we can type <cc>`kodk <- file.choose()`</cc> and select the `KODK.csv` file in the popup dialog window.


<!-- ### Online R Editor -->

<!-- <div class="rdrr">This is for quick demonstration only. Your work in here can **NOT** be saved.</div> -->

<!-- <iframe width='100%' height='2200' src='https://rdrr.io/snippets/embed/?code=' frameborder='0'></iframe> -->

```{js, echo=FALSE, eval=TRUE}
$(document).ready(function() {
  $('.footnotes ol').appendTo('#endnotes');
  $('.footnotes').remove();
});
```